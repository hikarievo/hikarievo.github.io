<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>神奇的伪元素content属性 | 喵窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="伪元素就是在 CSS 文件中选中的，实际上是不存在在 DOM 中的元素，早在 CSS1 的方案中就提出了:first-letter和:first-line这两个伪元素（也就是说 IE5.5 这种史前怪兽也可以做首字下沉和首行特效…），在CSS2中则添加了:before和:after伪元素，在CSS3中，为了区别伪元素与伪类，则让伪元素使用::作为前缀（IE从 IE9 开始支持 :: 伪元素）。
:">
<meta property="og:type" content="article">
<meta property="og:title" content="神奇的伪元素content属性">
<meta property="og:url" content="http://hikarievo.me/2015/03/11/20150311-pseudo-elements-content/index.html">
<meta property="og:site_name" content="喵窝">
<meta property="og:description" content="伪元素就是在 CSS 文件中选中的，实际上是不存在在 DOM 中的元素，早在 CSS1 的方案中就提出了:first-letter和:first-line这两个伪元素（也就是说 IE5.5 这种史前怪兽也可以做首字下沉和首行特效…），在CSS2中则添加了:before和:after伪元素，在CSS3中，为了区别伪元素与伪类，则让伪元素使用::作为前缀（IE从 IE9 开始支持 :: 伪元素）。
:">
<meta property="og:updated_time" content="2015-03-12T17:34:16.631Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="神奇的伪元素content属性">
<meta name="twitter:description" content="伪元素就是在 CSS 文件中选中的，实际上是不存在在 DOM 中的元素，早在 CSS1 的方案中就提出了:first-letter和:first-line这两个伪元素（也就是说 IE5.5 这种史前怪兽也可以做首字下沉和首行特效…），在CSS2中则添加了:before和:after伪元素，在CSS3中，为了区别伪元素与伪类，则让伪元素使用::作为前缀（IE从 IE9 开始支持 :: 伪元素）。
:">
  
    <link rel="alternate" href="/atom.xml" title="喵窝" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">喵窝</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">您在本站所读到的每一个字，都是我家猫在键盘上踩出来的</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hikarievo.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-20150311-pseudo-elements-content" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/11/20150311-pseudo-elements-content/" class="article-date">
  <time datetime="2015-03-11T14:06:25.000Z" itemprop="datePublished">2015-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      神奇的伪元素content属性
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>伪元素就是在 CSS 文件中选中的，实际上是不存在在 DOM 中的元素，早在 CSS1 的方案中就提出了<code>:first-letter</code>和<code>:first-line</code>这两个伪元素（也就是说 IE5.5 这种史前怪兽也可以做首字下沉和首行特效…），在CSS2中则添加了<code>:before</code>和<code>:after</code>伪元素，在CSS3中，为了区别伪元素与伪类，则让伪元素使用<code>::</code>作为前缀（IE从 IE9 开始支持 :: 伪元素）。</p>
<p><code>:before</code>和<code>:after</code>这对好兄妹在初登场的时候使用得并不频繁，因为根据 CSS2.1 的描述，它们是用来显示那些作者不希望出现在文档树中，可以让浏览器自动生成的内容：</p>
<blockquote>
<p>In some cases, authors may want user agents to render content that does not come from the document tree. One familiar example of this is a numbered list; the author does not want to list the numbers explicitly, he or she wants the user agent to generate them automatically. Similarly, authors may want the user agent to insert the word “Figure” before the caption of a figure, or “Chapter 7” before the seventh chapter title. For audio or braille in particular, user agents should be able to insert these strings.</p>
</blockquote>
<p>后来的人们把这些棒棒的 idea 全部弃之不用，反之利用它的特性来完成很多黑科技手法：其主要用法之一是让它们充当 clear fix （清除浮动）以及避免 margin collapse （margin合并）的元素，从而保持干净整洁的 DOM 文档树。另外还有使用伪元素来做 icon （Bootstrap 所使用的 Font Awesome 以及现在绝大多数 @font-face 做 icon 的基本上都是这么做）。后来伴随着 CSS3 所支持的更多效果，慢慢就出现了一些丧病的 绘图，开始看到的是<a href="http://tympanus.net/Tutorials/CSSButtonsPseudoElements/index3.html" target="_blank" rel="external">像这样</a>的伪 3D 特效，然后代码死宅们还放出了 <a href="http://one-div.com/" target="_blank" rel="external">One div</a> 这种实用奇特小 icon 和 <a href="http://a.singlediv.com/" target="_blank" rel="external">A Single Div</a> 这种明显就是炫技的作品……</p>
<p>各种情况表明现在这对好兄妹完全是肆无忌惮的泛滥状态，但上面举例这些却只是神奇伪元素的一部分用法——<code>content</code>属性值为字符串或空，从当时来看（乃至现在来看），根本都属于黑科技的一类。但其实伪元素<code>:before</code>和<code>:after</code>还有很多其他可选的属性值…而且那才是人家被创造出来的本意啊！！！<br><a id="more"></a></p>
<h2 id="quote系列和none"><a href="#quote系列和none" class="headerlink" title="quote系列和none"></a>quote系列和none</h2><p>把这俩放一起说是因为我真的看不太出来…这俩有什么用。none还好说，就是清空这个伪元素。一个伪元素如果没有 content 属性就直接消失了，如同它未曾存在过（但是normal的默认值就是等于none，而且这个属性貌似不继承…</p>
<p>quote系列是指open-quote、close-quote、no-open-quote、no-close-quote四个属性值…默认情况下open-quote就会显示为上引号，close-quote会显示为下引号…可以通过父元素的quote属性来为其重新赋值，以配合不同语言的引号需求。翻了一下 W3c 标准的文档，关于 quote 系列的示例如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 创建不同语言的 quotes 符号 */</span></span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:lang(en)</span> &#123; <span class="attribute">quotes</span>: <span class="string">'"'</span> <span class="string">'"'</span> <span class="string">"'"</span> <span class="string">"'"</span> &#125;</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:lang(no)</span> &#123; <span class="attribute">quotes</span>: <span class="string">"«"</span> <span class="string">"»"</span> <span class="string">'"'</span> <span class="string">'"'</span> &#125;</span><br><span class="line"><span class="comment">/* 设置伪元素 */</span></span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">content</span>: open-quote &#125;</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:after</span>  &#123; <span class="attribute">content</span>: close-quote &#125;</span><br></pre></td></tr></table></figure></p>
<p>那么当HTML为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;HTML lang=&quot;no&quot;&gt;</span><br><span class="line">  &lt;HEAD&gt;</span><br><span class="line">  &lt;TITLE&gt;Quotes&lt;/TITLE&gt;</span><br><span class="line">  &lt;/HEAD&gt;</span><br><span class="line">  &lt;BODY&gt;</span><br><span class="line">    &lt;P&gt;&lt;Q&gt;Trøndere gråter når &lt;Q&gt;Vinsjan på kaia&lt;/Q&gt; blir deklamert.&lt;/Q&gt;</span><br><span class="line">  &lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br></pre></td></tr></table></figure></p>
<p>的时候，显示结果为：</p>
<blockquote>
<p>«Trøndere gråter når “Vinsjan på kaia” blir deklamert.»</p>
</blockquote>
<p>这个示例其实解决了我很多疑惑（有问题问标准嗯嗯），从国内环境来说，首先我们缺乏这种转换的需求（就连 zh-hant 和 zh-hans 之间的转换都鲜有问津），其次我们的设计和前端代码里都不会特地区分“某人所说的话”这样的内容…所以（摊手…）如果是多语言网站，并且有这种需求，可以参考。</p>
<p>另外邪道一点的想法就是把 quote 改成各种符号…实用性上没找到什么亮点……</p>
<h2 id="url"><a href="#url" class="headerlink" title="url()"></a>url()</h2><p>括号里填上随便一个图片、音频、视频的地址，就搞定了。填图片的做法与用 @font-face 做 icon 有些相似，放大图的话又好似 background。如果配合:hover伪类或者[check]这种黑科技的话…倒是可以抛弃js实现一些比较炫酷的声光电一体特效（思路参见使用 radio 实现纯 css slider 的黑科技<a href="http://tympanus.net/Tutorials/CSS3FluidParallaxSlideshow/" target="_blank" rel="external">demo</a>）。</p>
<h2 id="attr"><a href="#attr" class="headerlink" title="attr()"></a>attr()</h2><p>在括号里填上个属性名，就可以将该伪元素所属的元素的该属性值读出来，返回字符串并作为这个伪元素的内容。常见的做法之一是在 print 页面中，让伪元素读取<code>a</code>元素的<code>href</code>属性，以便用户访问。另外这几天做的一个新 demo 里，需要一个图片悬停出现黑色遮罩和说明文字的效果。于是给图片的父元素设置了两个伪元素，一个用来当作黑色遮罩，另一个则读取单独写入的<code>data-*</code>属性值来作为显示的文字内容~甚至可以丧病地读取多个内容，实现多行内容……</p>
<p>随手写了一个<a href="http://runjs.cn/detail/m82oasx9" target="_blank" rel="external">demo</a>，包括了伪元素折行和图片水平分布两个黑科技…欢迎围观和吐槽</p>
<p>BTW, <code>attr()</code>作为 CSS 中为数不多的函数（在 CSS 中被称为 Functional Notation），在 CSS3 中被赋予了更多的黑科技，不过鉴于没有浏览器实现，就仅附上 <a href="http://www.w3.org/TR/css3-values/#attr-notation" target="_blank" rel="external">W3C 标准（英文）</a>和 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/attr" target="_blank" rel="external">MDN参考文档</a>，剩下的有空再谈（又给自己挖坑…</p>
<h2 id="counter-s"><a href="#counter-s" class="headerlink" title="counter[s]"></a>counter[s]</h2><p>content 属性里面非常有趣的的一位就是它了，华丽丽的计数器。有序列表<code>ol</code>下的每一个<code>li</code>元素都会默认有数字编号，而 counter 则可以完成更加复杂的嵌套列表的序号。</p>
<p>不过 counter 用起来也挺麻烦的，首先要重置计数器：为父元素的样式添加<code>counter-reset</code>属性，属性值为计数器的名字。然后在需要显示计数数值的元素的伪元素上，添加<code>counter-increment: counter-name</code>的属性，并把<code>content</code>属性写为<code>counter(counter-name)</code>就可以了。</p>
<p><code>counter-increment</code>这个属性在默认情况下，是让计数器自增1，但也可以这样同时创建多个计数器，并赋予不同的自增减值：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 名为 my-counter 的计数器每次计数时，自增2；名为 your-counter 的计数器每次计数时，自增1；名为 his-counter 的计数器每次计数时，自减1。 */</span></span><br><span class="line"><span class="selector-tag">counter-increment</span>: <span class="selector-tag">my-counter</span> 2 <span class="selector-tag">your-counter</span> <span class="selector-tag">his-counter</span> <span class="selector-tag">-1</span>;</span><br></pre></td></tr></table></figure></p>
<p>而关于<code>counters</code>和嵌套的计数器，MDN 的<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Counters#Nesting_counters" target="_blank" rel="external">这个 Demo</a>已经讲得非常清楚了，我就不多说了…</p>
<p>关于计数所显示的“数字”，默认情况下是阿拉伯数字，可以将<code>counter(counter-name,style)</code>或<code>counters(counter-name,string,style)</code>中的 style 换成<code>list-style-type</code>所允许的任意值，只是在 counters 中，修改一个 style，所有的字符都会跟着变…可以看一下<a href="http://runjs.cn/code/vfywogpr" target="_blank" rel="external">这个 Demo</a>。</p>
<p>PS，<code>display:none</code>的元素不会增加计数，而<code>visibility:hidden</code>的元素可以，这个跟<code>display</code>和<code>visibility</code>这两个属性本身的特性有关啦。</p>
<hr>
<p>CSS 作为一系列标准的集合也在不断更新和完善，当初标准的制定者大概怎么也没想到，伪元素居然被用在了那么多猎奇的地方上，而现在以我的目光来看，那些原本的用途反而变成了猎奇的存在 XD</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hikarievo.me/2015/03/11/20150311-pseudo-elements-content/" data-id="cip0o073h0008bsxeoba37duf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/03/17/20150317-the-games-i-played-in-my-childhood/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          儿时玩过的那些深深伤害了我幼小心灵的游戏
        
      </div>
    </a>
  
  
    <a href="/2015/02/18/20150218-what-i-talk-about-when-i-talk-about-employment/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">当我谈论工作时我谈论什么</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/初心者/">初心者</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/吃/">吃</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/推荐/">推荐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杂谈/">杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游记/">游记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/看书/">看书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/考据/">考据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计/">设计</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 18.33px;">CSS</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/初心者/" style="font-size: 15px;">初心者</a> <a href="/tags/吃/" style="font-size: 10px;">吃</a> <a href="/tags/工具/" style="font-size: 16.67px;">工具</a> <a href="/tags/推荐/" style="font-size: 11.67px;">推荐</a> <a href="/tags/杂谈/" style="font-size: 20px;">杂谈</a> <a href="/tags/游记/" style="font-size: 10px;">游记</a> <a href="/tags/看书/" style="font-size: 11.67px;">看书</a> <a href="/tags/翻译/" style="font-size: 10px;">翻译</a> <a href="/tags/考据/" style="font-size: 13.33px;">考据</a> <a href="/tags/设计/" style="font-size: 15px;">设计</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/21/20160521-detailed-introduction-of-background-properties/">CSS background 属性使用手册</a>
          </li>
        
          <li>
            <a href="/2016/04/02/20160402-from-newbie-to-veteran/">从菜鸟到行家，从面条说起</a>
          </li>
        
          <li>
            <a href="/2016/03/18/20160318-leaner-responsive-images-with-client-hints/">【译】使用客户端查询托管响应式图片</a>
          </li>
        
          <li>
            <a href="/2015/10/11/20151011-online-diagram-and-flow-chart/">在线创建美图表、流程图</a>
          </li>
        
          <li>
            <a href="/2015/09/03/20150903-lets-orienteering/">来一起玩定向吧 &gt;&lt;</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 阿布<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>